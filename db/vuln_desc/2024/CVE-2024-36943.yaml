descriptions:
- lang: en
  value: "In the Linux kernel, the following vulnerability has been resolved:\n\n\
    fs/proc/task_mmu: fix loss of young/dirty bits during pagemap scan\n\nmake_uffd_wp_pte()\
    \ was previously doing:\n\n  pte = ptep_get(ptep);\n  ptep_modify_prot_start(ptep);\n\
    \  pte = pte_mkuffd_wp(pte);\n  ptep_modify_prot_commit(ptep, pte);\n\nBut if\
    \ another thread accessed or dirtied the pte between the first 2\ncalls, this\
    \ could lead to loss of that information.  Since\nptep_modify_prot_start() gets\
    \ and clears atomically, the following is the\ncorrect pattern and prevents any\
    \ possible race.  Any access after the\nfirst call would see an invalid pte and\
    \ cause a fault:\n\n  pte = ptep_modify_prot_start(ptep);\n  pte = pte_mkuffd_wp(pte);\n\
    \  ptep_modify_prot_commit(ptep, pte);"
- lang: es
  value: "En el kernel de Linux, se ha resuelto la siguiente vulnerabilidad: fs/proc/task_mmu:\
    \ corrige la p\xE9rdida de bits j\xF3venes/sucios durante el escaneo del mapa\
    \ de p\xE1ginas que make_uffd_wp_pte() estaba haciendo anteriormente: pte = ptep_get(ptep);\
    \ ptep_modify_prot_start(ptep); pte = pte_mkuffd_wp(pte); ptep_modify_prot_commit(ptep,pte);\
    \ Pero si otro hilo accedi\xF3 o ensuci\xF3 el pte entre las 2 primeras llamadas,\
    \ esto podr\xEDa provocar la p\xE9rdida de esa informaci\xF3n. Dado que ptep_modify_prot_start()\
    \ obtiene y borra at\xF3micamente, el siguiente es el patr\xF3n correcto y evita\
    \ cualquier posible ejecuci\xF3n. Cualquier acceso despu\xE9s de la primera llamada\
    \ ver\xEDa un pte no v\xE1lido y provocar\xEDa una falla: pte = ptep_modify_prot_start(ptep);\
    \ pte = pte_mkuffd_wp(pte); ptep_modify_prot_commit(ptep,pte);"
id: CVE-2024-36943
lastModified: '2024-05-30T18:18:58.870'
metrics: {}
published: '2024-05-30T16:15:17.307'
references:
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/74b3d66f91d9f539f99faad74d796fa9a389a015
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/c70dce4982ce1718bf978a35f8e26160b82081f4
sourceIdentifier: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
vulnStatus: Awaiting Analysis
