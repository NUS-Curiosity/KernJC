.PHONY: all
all: poc.bpf.o poc-pass.bpf.o

.PHONY: clean
clean:
	rm -rf $(OUTPUT)

# https://pchaigno.github.io/bpf/2021/10/20/ebpf-instruction-sets.html
%.bpf.o: %.bpf.s
	llvm-mc -triple bpf -mcpu=v3 -filetype=obj -o $@ $<
	llvm-objdump -d $@ > $*.bpf.objdump

# delete failed targets
.DELETE_ON_ERROR:

# keep intermediate (.skel.h, .bpf.o, etc) targets
.SECONDARY:
